<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <template
            id="report_invoice_document_custom_fields_ext"
            inherit_id="account.report_invoice_document"
    >
        <xpath expr="//table[@name='invoice_line_table']/tbody/t[@t-foreach='lines']" position="attributes">
            <attribute name="t-foreach">lines.filtered(lambda line: 'Timbre fiscal' not in line.product_id.name)</attribute>
        </xpath>

        <xpath expr="//table[@name='invoice_line_table']//td[@name='td_taxes']" position="replace">
            <td name="td_taxes"
                t-attf-class="text-start {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                <span t-out="', '.join(map(lambda x: (x.invoice_label or x.name), line.tax_ids.filtered(lambda tax: 'Timbre Fiscal' not in tax.name)))"
                      id="line_tax_ids">Tax
                    15%
                </span>
            </td>
        </xpath>

    </template>


    <template id="tax_groups_totals_inherit"
              inherit_id="account.tax_groups_totals">
        <xpath expr="//tr" position="replace">
           <tr>
                        <td><span class="text-nowrap" t-out="amount_by_group['tax_group_name']">Tax 15%</span></td>
                        <td class="text-end o_price_total">
                            <span class="text-nowrap" t-out="amount_by_group['formatted_tax_group_amount']">1.05</span>
                        </td>
                </tr>
        </xpath>
    </template>
</odoo>
